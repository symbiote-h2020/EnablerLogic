language: java
env:
  global:
    secure: "LHbWtU0E/cIEUFhJkQrb3iRzho2vjGsUC+mC02xv7TrXjtb2L8e4AUqPdUUMCNlD4Yk+oWv1io1I+xxffYZ+Kk2N5VSPvUXziE3590O/dfiNG2i62TrH4zDqUy+4hlsBHrUd6IkWxF4B5B9W4mL5qQpgr6zAtso+I3uS9dqtn21hjav4e5w2fjn6PQRMWMwbDyKARMVZzRc3Pznat2DfjJghw45MPmthglV2P15asF9vOKIPI+Yb6VagH/JaO706yITL5K3dp27/9Sunt9ykfmzzE1Nsy8PlwhXn68usLieqn86HjR14MpCu7j57gCmWn6xPl90FaOWIdw+K8qx70KxojkjpHWrrqPt5lycYKGW5nQBksSPIWJFjiFWXNbeHgaOK0BSFEZBT7UOT16br5kUVaPWYRRDnTO7f8vtzGJArwrLH+32pOhnXv8ljEvSS5X0mHJynR5LEkT/ct8QbS43nP06m37dWmAmft0SNmVuQ3BWkNLQNCsdrnriBTnd/Ve7A4IRQ+YV+cFOZ3YYylbM1ld6PgcFfLfIxZvpnYBDbcwEnFdpL2rUqjitcjd7GaQ/ZzIDwGbv2PzOPMQRkaeZL9bUQojuRnkPy0MoHphKGvSve7rF7XlIqh5U7Db19msS933iOetN/EgWD4nj4/hzbk0v73AD373GuAc0VTIw="
jdk:
- oraclejdk8
services:
- mongodb
- rabbitmq
sudo: required
branches:
  only:
  - staging
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
after_success:
- chmod a+x merge_script.sh
- BRANCHES_TO_MERGE_REGEX='staging' BRANCH_TO_MERGE_INTO=develop GITHUB_REPO=symbiote-h2020/EnablerLogic
  ./merge_script.sh
- bash <(curl -s https://codecov.io/bash)
